var qwertyGrammar;(()=>{"use strict";function e(e,t,n,r,i,s){const o=[];for(let l=0;l<e.length;l++){let r=n.indexOf(e[l]);if(-1!==r){let i=`[З${o.length}]`,s=t[n[r]];!Array.isArray(s)&&(s=[s]),o.push([i,...s]),e=e.replace(n[r],i),l+=i.length-1}}let f=[],h=[];if(o.length){const t=l(...o.map((e=>e.length-1)));for(let l=0;l<t.length;l++){let g=t[l],c=e;if(g.forEach(((e,t)=>{c=c.replace(o[t][0],o[t][e+1])})),r(c,n)){if(f.length>=i)break;f.push(c)}else{if(h.length>=s)break;h.push(c)}}}return{chains:f,words:h}}function t(e,t){let l;for(let n=0;n<t.length;n++)if(-1!==e.indexOf(t[n])){l=t[n];break}return l}function l(...e){let t=e.reduce(((e,t)=>t*e)),l=[];for(let t=e.length-1;t>0;t--)t===e.length-1?l.push(e[t]):l.push(e[t]*l[l.length-1]);l.unshift(1),l.reverse();let n=[];for(let r=0;r<t;r++){let t=[];for(let n=0;n<e.length;n++)t.push(Math.floor(r/l[n]%e[n]));n.push(t)}return n}function n(e,t,l){let r;if(e[l].length>1||void 0===e[l])return e[l];if("string"==typeof e[l]){for(let i=0;i<t.length;i++){if(e[l]!==t[i]||l===t[i])return;r=n(e,t,e[l])}if(void 0===r)return e[l]}else{for(let i=0;i<t.length;i++)e[l][0]===t[i]&&(r=n(e,t,e[l][0]));if(void 0===r)return e[l]}return r}function r(e,t=2){let l=!0,n=0,r=0,o={},f={};for(;l;)0===n?s(e,o)||(l=!1):s(f,o)||(l=!1),i(o,f,e,r),l||(r+=1,r<t&&(l=!0)),n+=1;return o}function i(e,t,l,n){let r,i,s,o,f=0;for(let h in l)if("string"==typeof l[h]){s=!0;for(let t=0;t<l[h].length;t++){r=!1;for(let n in e)if(l[h][t]!==n){i=!0;for(let e in l)l[h][t]===e&&(i=!1);i&&(r=!0)}else r=!0;!r&&e.length>0&&(s=!1)}if(s){f=-1;for(let t=0;t<l[h].length;t++){for(let n in e)l[h][t]===n&&(f=n);-1===f?void 0===o?o=l[h][t]:o+=l[h][t]:"object"==typeof e[f]?void 0!==e[f][n]?void 0===o?o=e[f][n]:o+=e[f][n]:void 0!==o&&(o=e[f][0]):void 0===o?o=e[f]:o+=e[f],f=-1}s=!0;for(let e in t)for(let l=0;l<t[e].length;l++)o===t[e][l]&&h===e&&(s=!1);s&&void 0!==o&&(h in t||(t[h]=[]),t[h].push(o)),o=void 0}}else if("object"==typeof l[h])for(let g=0;g<l[h].length;g++){s=!0;for(let t=0;t<l[h][g].length;t++){r=!1;for(let n in e)if(l[h][g][t]!==n){i=!0;for(let e in l)l[h][g][t]===e&&(i=!1);i&&(r=!0)}else r=!0;!r&&e.length>0&&(s=!1)}if(s){f=-1;for(let t=0;t<l[h][g].length;t++){for(let n in e)for(let n in e)l[h][g][t]===n&&(f=n);-1===f?void 0===o?o=l[h][g][t]:o+=l[h][g][t]:"object"==typeof e[f]?void 0!==e[f][n]?void 0===o?o=e[f][n]:o+=e[f][n]:void 0!==o&&(o=e[f][0]):void 0===o?o=e[f]:o+=e[f],f=-1}s=!0;for(let e in t)for(let l=0;l<t[e].length;l++)o===t[e][l]&&h===e&&(s=!1);s&&void 0!==o&&(h in t||(t[h]=[]),t[h].push(o)),o=void 0}}}function s(e,t){let l,n=0;for(let r in e)if("string"==typeof e[r]){l=!0;for(let t=0;t<e[r].length;t++)for(let n in e)e[r][t]===n&&(l=!1);if(l){for(let n in t)for(let i=0;i<t[n].length;i++)e[r]===t[n][i]&&r===n&&(l=!1);l&&(r in t||(t[r]=[]),t[r].push(e[r]),n=1)}}else if("object"==typeof e[r])for(let i=0;i<e[r].length;i++){l=!0;for(let t=0;t<e[r][i].length;t++)for(let n in e)e[r][i][t]===n&&(l=!1);if(l){for(let n in t)for(let s=0;s<t[n].length;s++)e[r][i]===t[n][s]&&r===n&&(l=!1);l&&(r in t||(t[r]=[]),t[r].push(e[r][i]),n=1)}}return n}class o{constructor(){this.rules={cluster:{},transformedCluster:{},current:0}}grammarCluster(){const l=e=>{this.rules.cluster.hasOwnProperty(e.sign)?this.rules.cluster[e.sign].rules.push(e):this.rules.cluster[e.sign]={rules:[e],current:-1}};let n=/\$ANY\(.-.\)/g;this.rules.cluster={},this.rules.grammar.forEach((r=>{let i=r.res.match(n),s=[];if(i){let n={},o=["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н"],f=r.res;i.forEach((e=>{let t=[],[l,r]=e.slice(e.indexOf("(")+1,e.indexOf(")")).split("-");for(let e=l;e<=r;e++)t.push(String(e));let i=o.pop();return f=f.replaceAll(e,i),s.push(i),n[i]=t}));let{chains:h,words:g}=e(f,n,s,t,1e3,1e3);g.forEach((e=>l({sign:r.sign,res:e})))}else l(r)}))}setTransformedCluster(){this.rules.transformedCluster=this.transformer()}setDeterminate(){this.determinate=[],this.rules.grammar.forEach((e=>{let t=e.sign;this.determinate.includes(t)||this.determinate.push(t)}))}transformer(){const e={};for(let t in this.rules.cluster){let l=this.rules.cluster[t].rules.map((e=>e.res));e[t]=1===l.length?l[0]:l}return e}setGrammar(e){this.rules.grammar=e}setNormal(){this.rules.NTC=function(e){if(1===Object.keys(e).length&&""===e.S)return e;{let t=0;return function(e){e.S0="S"}(e),function(e){let t,l=[],n=!0,r=!0,i=!0,s=!0;for(let t in e)if(""===e[t])l.push(t);else if("object"==typeof e[t]){n=!1,r=!0;for(let l=0;l<e[t].length;l++)""===e[t][l]&&(n=!0),e[t][l]!==t&&""!==e[t][l]&&(r=!1);n&&r&&l.push(t)}for(n=!0;n;){r=!1;for(let n in e)if("string"==typeof e[n]&&1===e[n].length)for(let i=0;i<l.length;i++)if(e[n]===l[i]&&"S0"!==n){for(let e=0;e<l.length;e++)n===l[e]&&(t=!1);void 0===t&&(r=!0,l.push(n)),t=void 0}else e[n]===l[i]&&"S0"===n&&(e[n]=["S",""]);else if("string"==typeof e[n]&&e[n].length>1){i=!1,s=!0;for(let t=0;t<e[n].length;t++){for(let r=0;r<l.length;r++)e[n][t]===l[r]&&(i=!0);i||(s=!1),i=!1}if(s){for(let e=0;e<l.length;e++)n===l[e]&&(t=!1);void 0===t&&(r=!0,l.push(n)),t=void 0}}else if("object"==typeof e[n])for(let o=0;o<e[n].length;o++){i=!1,s=!0;for(let t=0;t<l.length;t++)if(1===e[n][o].length){if(e[n][o]===l[t]&&"S0"!==n&&(i=!0),e[n][o]!==n&&""!==e[n][o]&&e[n][o]!==l[t]){s=!1;for(let t=0;t<l.length;t++)e[n][o]===l[t]&&(s=!0);!1===s&&(t=l.length)}}else for(let r=0;r<e[n][o].length;r++)if(e[n][o][r]===l[t]&&"S0"!==n&&(i=!0),e[n][o][r]!==n&&e[n][o][r]!==l[t]){s=!1;for(let t=0;t<l.length;t++)e[n][o][r]===l[t]&&(s=!0);!1===s&&(t=l.length,r=e[n][o].length)}if(i&&s){for(let e=0;e<l.length;e++)n===l[e]&&(t=!1);void 0===t&&(r=!0,l.push(n)),t=void 0}else s||(o=e[n].length)}r||(n=!1)}l.includes("S")&&(e.S0=["S",""]);for(let t=0;t<l.length;t++)delete e[l[t]];for(let n in e)if("string"==typeof e[n]&&e[n].length>1)for(let r=0;r<e[n].length;r++)for(let i=0;i<l.length;i++)e[n][r]===l[i]&&(t=e[n].slice(0,r)+e[n].slice(r+1,e[n].length),e[n]=t,r-=1);else if("object"==typeof e[n]&&"S0"!==n)for(let r=0;r<e[n].length;r++)for(let i=0;i<e[n][r].length;i++)for(let s=0;s<l.length;s++)e[n][r][i]===l[s]&&e[n][r].length>1?(t=e[n][r].slice(0,i)+e[n][r].slice(i+1,e[n][r].length),e[n][r]=t,i-=1):e[n][r][i]===l[s]&&1===e[n][r].length&&(e[n][r]="");l.length=0;for(let t in e)if("object"==typeof e[t]&&"S0"!==t)for(let n=0;n<e[t].length;n++)""===e[t][n]&&(l.includes(t,0)||(l.push(t),"S"===t&&(e.S0=["S",""])),0!==n?(e[t].splice(n,n),n-=1):e[t]=e[t].slice(1,e[t].length));for(n=!0;n;){r=!1;let i=0;t=void 0;for(let n in e)if("string"==typeof e[n]){for(let t=0;t<e[n].length;t++)for(let r=0;r<l.length;r++)e[n][t]===l[r]&&(i+=1);if(i===e[n].length&&"S0"!==n){for(let e=0;e<l.length;e++)n===l[e]&&(t=!1);void 0===t&&(r=!0,l.push(n),"S"===n&&(e.S0=["S",""])),t=void 0}i=0}else if("object"==typeof e[n])for(let s=0;s<e[n].length;s++){for(let t=0;t<e[n][s].length;t++)for(let r=0;r<l.length;r++)e[n][s][t]===l[r]&&(i+=1);if(i===e[n][s].length&&"S0"!==n){for(let e=0;e<l.length;e++)n===l[e]&&(t=!1);void 0===t&&(r=!0,l.push(n),"S"===n&&(e.S0=["S",""])),t=void 0}i=0}r||(n=!1)}for(let n in e)if("string"==typeof e[n]&&e[n].length>1){for(let r=0;r<e[n].length;r++)for(let i=0;i<l.length;i++)e[n][r]===l[i]&&(t=e[n].slice(0,r)+e[n].slice(r+1,e[n].length),"string"==typeof e[n]&&(e[n]=[e[n]]),e[n].push(t));if("object"==typeof e[n]&&"S0"!==n)for(let r=0;r<e[n].length;r++)if(e[n][r].length>1)for(let i=0;i<e[n][r].length;i++)for(let s=0;s<l.length;s++)e[n][r][i]===l[s]&&(t=e[n][r].slice(0,i)+e[n][r].slice(i+1,e[n][r].length),e[n].push(t))}l.includes("S")&&(e.S0=["S",""])}(e),t=function(e){let t,l,n,r=[],i=[],s=0,o=!0;for(let t in e)if("string"==typeof e[t])for(let l=0;l<e[t].length;l++)e[t][l]in e==0&&!1===r.includes(e[t][l],0)?r.push(e[t][l]):e[t][l]in e==1&&!1===i.includes(e[t][l],0)&&i.push(e[t][l]);else if("object"==typeof e[t])for(let l=0;l<e[t].length;l++)for(let n=0;n<e[t][l].length;n++)e[t][l][n]in e==0&&!1===r.includes(e[t][l][n],0)?r.push(e[t][l][n]):e[t][l][n]in e==1&&!1===i.includes(e[t][l][n],0)&&i.push(e[t][l][n]);for(let f in e)if("string"==typeof e[f]&&e[f].length>1)for(let h=0;h<e[f].length;h++){for(let t in e)if(e[f][h]===t||"~"===e[f][h]){if(o=!1,"~"===e[f][h]){let t=h+1;for(;"~"!==e[f][t];)t+=1;h=t+1}break}if(!0===o){t=e[f][h];for(let l in e)e[l]!==t||i.includes(l)||(n=l);if(void 0===n)for(;;){if(!1===r.includes(`${s}`,0)){l=s<10?e[f].slice(0,h)+`${s}`+e[f].slice(h+1,e[f].length):e[f].slice(0,h)+`~${s}~`+e[f].slice(h+1,e[f].length),e[f]=l,s<10?e[`${s}`]=t:e[`~${s}~`]=t,s+=1,h=-1;break}s+=1}else l=e[f].slice(0,h)+`${n}`+e[f].slice(h+1,e[f].length),e[f]=l,n=void 0,h=-1}o=!0}else if("object"==typeof e[f])for(let h=0;h<e[f].length;h++)if(e[f][h].length>1)for(let g=0;g<e[f][h].length;g++){for(let t in e)if(e[f][h][g]===t||"~"===e[f][h][g]){if(o=!1,"~"===e[f][h][g]){let t=g+1;for(;"~"!==e[f][h][t];)t+=1;g=t}break}if(!0===o){t=e[f][h][g];for(let l in e)e[l]!==t||i.includes(l)||(n=l);if(void 0===n)for(;;){if(!1===r.includes(`${s}`,0)){l=s<10?e[f][h].slice(0,g)+`${s}`+e[f][h].slice(g+1,e[f][h].length):e[f][h].slice(0,g)+`~${s}~`+e[f][h].slice(g+1,e[f][h].length),e[f][h]=l,s<10?e[`${s}`]=t:e[`~${s}~`]=t,s+=1,g=-1;break}s+=1}else l=e[f][h].slice(0,g)+`${n}`+e[f][h].slice(g+1,e[f][h].length),e[f][h]=l,n=void 0,g=-1}o=!0}return[s,r,i]}(e),function(e,t,l,n){let r,i,s,o=0,f=!0;for(;f;){r=null;for(let h in e)if(e[h].length>2&&"string"==typeof e[h]){if(o=0,"~"!==e[h][0])i=e[h].slice(1,e[h].length);else{for(o=0;"~"!==e[h][o+1];)o+=1;if(i=e[h].slice(o+2,e[h].length),o+=1,void 0===e[h][o+1])f=!1;else if("~"===e[h][o+1]){let t=o+2;for(;"~"!==e[h][t];)t+=1;void 0===e[h][t+1]&&(f=!1)}}for(let t in e)e[t]!==i||n.includes(t)||(s=t);if(void 0===s&&f)for(;;){if(!1===l.includes(`${t}`,0)){r=t<10?e[h].slice(0,o+1)+`${t}`:e[h].slice(0,o+1)+`~${t}~`,e[h]=r,t<10?e[`${t}`]=i:e[`~${t}~`]=i,t+=1;break}t+=1}else f&&(r=e[h].slice(0,o+1)+s,e[h]=r,s=void 0)}else if("object"==typeof e[h]&&f)for(let g=0;g<e[h].length;g++)if(e[h][g].length>2){if(o=0,"~"!==e[h][g][0])i=e[h][g].slice(1,e[h][g].length);else{for(o=0;"~"!==e[h][g][o+1];)o+=1;if(i=e[h][g].slice(o+2,e[h][g].length),f=!1,o+=1,void 0===e[h][g][o+1])f=!1;else if("~"===e[h][g][o+1]){let t=o+2;for(;"~"!==e[h][g][t];)t+=1;void 0===e[h][g][t+1]&&(f=!1)}}for(let t in e)e[t]!==i||n.includes(t)||(s=t);if(void 0===s)for(;;){if(!1===l.includes(`${t}`,0)){r=t<10?e[h][g].slice(0,o+1)+`${t}`:e[h][g].slice(0,o+1)+`~${t}~`,e[h][g]=r,t<10?e[`${t}`]=i:e[`~${t}~`]=i,t+=1;break}t+=1}else r=e[h][g].slice(0,o+1)+s,e[h][g]=r,s=void 0}null===r&&(f=!1)}}(e,t[0],t[1],t[2]),function(e){for(let t in e)if("object"==typeof e[t])for(let l=0;l<e[t].length;l++)e[t][l]===t&&e[t].splice(l,l);for(let t in e)for(let l in e)if("object"==typeof e[l])for(let n=0;n<e[l].length;n++)if(e[l][n]===t)if(e[t]===l)e[l].splice(n,n);else if("object"==typeof e[t])for(let r=0;r<e[t].length;r++)e[t][n]===l&&e[l].splice(n,n)}(e),function(e){let t=[],l=0,r=!0;for(let n in e)t[l]=n,l+=1;for(;r;){r=!1;for(let l in e)if(1===e[l].length&&"string"==typeof e[l]&&"S0"!==l){for(let i=0;i<t.length;i++)if(e[l]===t[i]&&l!==t[i]&&"S0"!==l){if(r=!0,e[l]=n(e,t,e[l]),void 0===e[l])return 0}else if(e[l]===t[i]&&l===t[i])return 0}else if("object"==typeof e[l])for(let i=0;i<e[l].length;i++)if(1===e[l][i].length)for(let s=0;s<t.length;s++)if(e[l][i]===t[s]&&l!==t[s]&&"S0"!==l){if(r=!0,e[l][i]=n(e,t,e[l][i]),void 0===e[l][i])return 0;let s=0;for(let t in e)if("object"==typeof e[t])for(let l=0;l<e[t].length;l++)if("object"==typeof e[t][l]){for(let n=0;n<e[t][l].length;n++)s+=1,e[t].push(e[t][l][n]);e[t][l]="";for(let n=l;n<e[t].length-1;n++)e[t][n]=e[t][n+1];e[t].pop()}}else if(e[l][i]===t[s]&&l===t[s])return 0}return 1}(e)?("string"==typeof e.S0?e.S0=e.S.slice(0,e.S.length):void 0!==e.S?(e.S0=e.S.slice(0,e.S.length),e.S0.push("")):e.S0="",e):0}}(this.transformer())}setUnambiguous(){this.rules.UTC=r(this.transformer())}checkGrammar(){if(!function(e){let t=!0,l=[],n=[],r=[],i=0;for(let t in e)r[i]=t,i+=1;for(let l in e)if("string"==typeof e[l]){t=!0;for(let n=0;n<e[l].length;n++)e[l][n]===l&&(t=!1);if(!t)return!1}else{t=!1;for(let n=0;n<e[l].length;n++){let r=0;for(let t=0;t<e[l][n].length;t++)e[l][n][t]!==l&&(r+=1);r===e[l][n].length&&(t=!0)}if(!t)return!1}for(let n in e)if(t=!1,"string"==typeof e[n]){for(let l=0;l<e[n].length;l++)r.includes(e[n][l])&&(t=!0);t&&l.push(n),t=!1}else{for(let l=0;l<e[n].length;l++)for(let i=0;i<e[n][l].length;i++)r.includes(e[n][l][i])&&(t=!0);t&&l.push(n),t=!1}for(let r=0;r<l.length;r++){for(t=!0;t;){let i=!0,s=n.length;for(let t=0;t<l.length;t++)if("string"==typeof e[l[t]]){for(let s=0;s<e[l[t]].length;s++)e[l[t]][s]===l[r]||n.includes(e[l[t]][s])||(i=!1);i&&!n.includes(l[t])&&n.push(l[t]),i=!0}else{for(let s=0;s<e[l[t]].length;s++)for(let o=0;o<e[l[t]][s].length;o++)e[l[t]][s][o]===l[r]||n.includes(e[l[t]][s][o])||(i=!1);i&&!n.includes(l[t])&&n.push(l[t]),i=!0}(s===n.length||n.length>20)&&(t=!1)}if("string"==typeof e[l[r]]){for(let t=0;t<e[l[r]].length;t++)if(n.includes(e[l[r]][t]))return!1}else{t=!1;let i=!0;for(let s=0;s<e[l[r]].length;s++){for(let t=0;t<e[l[r]][s].length;t++)n.includes(e[l[r]][s][t])&&(i=!1);i&&(t=!0),i=!0}if(!t)return!1}n.length=0}return!0}(this.rules.transformedCluster))throw new Error("Грамматика составлена некорректно")}}class f{constructor(e=0){this.counter=e}getCurrent(){return this.counter}increaseCurrent(){this.counter+=1}}const h=class{constructor(){this.options=new o,this.Counter=f,this.settings={STACK_LIMIT:1e3,TREE_DEPTH_LIMIT:1e3,RESULT_LIMIT:1e3,DEATH_TIME:1500,PROCESS_STACK:!0}}system={combinationIndexes:l,replaceAllDeterminate:e,includes:t};setGrammar(e){this.options.setGrammar(e),this.options.setDeterminate(),this.options.grammarCluster(),this.options.setTransformedCluster(),this.options.checkGrammar(),this.options.setNormal(),this.options.setUnambiguous()}setSettings(e){this.settings={...this.settings,...e}}generation(){let e=new Set,t=new this.Counter,l=Date.now(),n=[["S"],[]];const i=(r,i,s,o,f)=>{for(;t.getCurrent()<i&&e.size<s&&n[0].length+n[1].length<o&&!(Date.now()-l>=f);){let l=n[0].shift(),{chains:i,words:f}=this.system.replaceAllDeterminate(l,r,this.options.determinate,this.system.includes,o-n[0].length-n[1].length,s-e.length);if(0===i.length&&0===f.length&&e.add(l),f.forEach((t=>e.size<s?e.add(t):null)),0===n[0].length){if(0===i.length&&0===n[1].length)break;n.shift(),t.increaseCurrent(),n[0]=[...n[0],...i].sort(((e,t)=>e.length>t.length)),n.push([])}else n[1]=[...n[1],...i]}};if(i(this.options.rules.transformedCluster,this.settings.TREE_DEPTH_LIMIT,this.settings.RESULT_LIMIT,this.settings.STACK_LIMIT,this.settings.DEATH_TIME),this.settings.PROCESS_STACK&&(0!==n[0].length||0!==n[1].length)){t.counter=0;let e=r(this.options.transformer());n[0]=n[0].sort(((e,t)=>e.length>t.length)),n[1]=n[1].sort(((e,t)=>e.length>t.length)),i(e,this.settings.TREE_DEPTH_LIMIT,this.settings.RESULT_LIMIT,2*this.settings.STACK_LIMIT,this.settings.DEATH_TIME)}return e=Array.from(e),e.sort(((e,t)=>e.length>t.length))}compareTwo(e,t){let l=0,n=e.length<=t.length?e.length:t.length;return e.length>=t.length?t.forEach((t=>{-1!==e.indexOf(t)&&(l+=1)})):e.forEach((e=>{-1!==t.indexOf(e)&&(l+=1)})),l/n*100}unmatched(e,t){let l=[];return e.forEach((e=>{-1===t.indexOf(e)&&l.push(e)})),l}checkWord(e){return function(e,t){let l=[];if(0===e)return 0;if(""===t)return 1!==e.S0.length;for(let n=0;n<t.length;n++)for(let r in e)if("string"==typeof e[r]&&e[r]===t[n])l[[0,n,r]]=!0;else if("object"==typeof e[r])for(let i=0;i<e[r].length;i++)e[r][i]===t[n]&&(l[[0,n,r]]=!0);for(let n=1;n<t.length;n++)for(let r=0;r<t.length-n;r++)for(let t=0;t<n;t++)for(let i in e)if("string"==typeof e[i]&&e[i].length>1){let s=1;if("~"===e[i][0]){for(;"~"!==e[i][s];)s+=1;!0===l[[t,r,e[i].slice(0,s+1)]]&&!0===l[[n-t-1,r+t+1,e[i].slice(s+1,e[i].length)]]&&(l[[n,r,i]]=!0)}else if("~"===e[i][1]){for(;"~"!==e[i][s];)s+=1;!0===l[[t,r,e[i][0]]]&&!0===l[[n-t-1,r+t+1,e[i].slice[e[i].length]]]&&(l[[n,r,i]]=!0)}else!0===l[[t,r,e[i][0]]]&&!0===l[[n-t-1,r+t+1,e[i][1]]]&&(l[[n,r,i]]=!0)}else if("object"==typeof e[i])for(let s=0;s<e[i].length;s++)if(e[i][s].length>1){let o=1;if("~"===e[i][s][0]){for(;"~"!==e[i][s][o];)o+=1;!0===l[[t,r,e[i][s].slice(0,o+1)]]&&!0===l[[n-t-1,r+t+1,e[i][s].slice(o+1,e[i][s].length)]]&&(l[[n,r,i]]=!0)}else if("~"===e[i][s][1]){for(;"~"!==e[i][s][o];)o+=1;!0===l[[t,r,e[i][s][0]]]&&!0===l[[n-t-1,r+t+1,e[i][s].slice[e[i][s].length]]]&&(l[[n,r,i]]=!0)}else!0===l[[t,r,e[i][s][0]]]&&!0===l[[n-t-1,r+t+1,e[i][s][1]]]&&(l[[n,r,i]]=!0)}return!!l[[t.length-1,0,"S0"]]}(this.options.rules.NTC,e)}static speedtest(e){let t=Date.now();return e(),Date.now()-t}};function g(){postMessage({message:"NEXT"})}onmessage=({data:{message:e,payload:t}})=>{if("start"===e){let e=h.speedtest((()=>{console.log("start worker");let e=!1,l=new h,n=new h;l.setSettings({RESULT_LIMIT:1e3,STACK_LIMIT:2e3,DEATH_TIME:1500}),n.setSettings({RESULT_LIMIT:1e3,STACK_LIMIT:2e3,DEATH_TIME:1500});try{l.setGrammar(t.grammar1),n.setGrammar(t.grammar2)}catch(t){postMessage({message:"ERROR",payload:t.message}),e=!0}if(e)return;g();let r=l.generation();postMessage({message:"GEN_1",payload:r}),g();let i,s=n.generation();postMessage({message:"GEN_2",payload:s}),g();let o=[],f=h.speedtest((()=>{if(i=l.unmatched(r,s),g(),i.length){let e=Date.now();for(let t=0;t<i.length&&!(Date.now()-e>=3e3);t++)o.push(n.checkWord(i[t]))}else o=[!0]}));console.log("time1",f);let c=o.filter((e=>!0===e));const u=(c.length+r.length-i.length)/(r.length-i.length+o.length)*100;g();let a=h.speedtest((()=>{if(i=n.unmatched(s,r),g(),o=[],i.length){let e=Date.now();for(let t=0;t<i.length&&!(Date.now()-e>=3e3);t++)o.push(l.checkWord(i[t]))}else o=[!0]}));console.log("time2",a),c=o.filter((e=>!0===e));const p=(c.length+s.length-i.length)/(s.length-i.length+o.length)*100;postMessage({message:"FINAL",payload:{check1:u,check2:p}})}));console.log("time",e)}},qwertyGrammar={}})();